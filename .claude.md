# Claude Code Project Guidelines

## Git Commit Messages

### Guidelines
- Keep commit messages **succinct and concise**
- Use clear, descriptive subjects (imperative mood: "Fix bug" not "Fixed bug")
- Do NOT include:
  - Claude attribution ("Generated with Claude Code")
  - Co-authored-by Claude tags
  - Excessive detail in commit message body

### Format
```
Short descriptive title (50 chars or less)

Optional body with brief details if needed.
- Bullet points for multiple changes
- Keep it focused and relevant
```

### Examples

**Good:**
```
Fix renderTemplate deprecation warning

- Update to foundry.applications.handlebars.renderTemplate
- Add ApplicationV2 migration plan
```

**Bad:**
```
Fix renderTemplate deprecation warning and add ApplicationV2 migration plan

- Updated renderTemplate calls to use foundry.applications.handlebars.renderTemplate
  - Fixed in module/combat/combat.js (getHeroPointsForInitiative)
  - Fixed in module/dice.mjs (_renderTemplate wrapper)
  - Updated module/__mocks__/foundry.mjs to support new API in tests

- Added APPLICATIONV2_MIGRATION_PLAN.md
  - Comprehensive plan for migrating from V1 to V2 Application framework
  - Includes phase-by-phase migration steps, testing checklists, and resources
  - Estimated 53-90 hours for complete migration

Fixes deprecation warning when rolling initiative in combat tracker.

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
```

## Branch Management

### CRITICAL: Update system.json URLs After Branch Checkout

**ALWAYS** update `system.json` URLs when checking out or creating a new branch.

Foundry VTT loads system code from the URLs specified in `system.json`. If these URLs point to a different branch, Foundry will load the old code instead of your local changes.

#### Required Updates

After checking out a new branch, update these three URLs in `system.json`:

1. **media.url** (line ~19):
   ```json
   "url": "https://raw.githubusercontent.com/worldsofwondergames/megs/{BRANCH_NAME}/system.json"
   ```

2. **manifest** (line ~45):
   ```json
   "manifest": "https://raw.githubusercontent.com/worldsofwondergames/megs/refs/heads/{BRANCH_NAME}/system.json"
   ```

3. **download** (line ~46):
   ```json
   "download": "https://github.com/worldsofwondergames/megs/zipball/{BRANCH_NAME}/"
   ```

Replace `{BRANCH_NAME}` with the current branch name.

#### Quick Command

```bash
# Get current branch name
git branch --show-current
```

## Code Style

Follow existing project conventions for JavaScript/MEGS system development.
